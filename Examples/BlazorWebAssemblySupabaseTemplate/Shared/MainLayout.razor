@inherits LayoutComponentBase

@inject AuthService AuthService
@inject NavigationManager NavigationManager
@inject ISnackbar Snackbar

<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start"
            OnClick="@((e) => DrawerToggle())" />
        <MudSpacer />
        
        <MudLink Href="https://github.com/supabase-community/supabase-csharp">
            <MudImage Src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" Alt="Github icon"
                Elevation="25" Class="rounded-lg" Width="30" Height="30" />
        </MudLink>

        <AuthorizeView>
            <Authorized>
                <MudChip Color="Color.Primary" OnClick="OnClickLogout">Logout</MudChip>
            </Authorized>
            <NotAuthorized>
                <MudChip Color="Color.Primary" Link="/login">Login</MudChip>
            </NotAuthorized>
        </AuthorizeView>
    </MudAppBar>
    <MudDrawer @bind-Open="_drawerOpen" Elevation="2">
        <MudDrawerHeader>
            <MudText Typo="Typo.h5" Class="mt-1">Blazor WASM Supabase Demo</MudText>
        </MudDrawerHeader>

        @* ********************************** MENU ********************************** *@

        <MudNavMenu Color="Color.Secondary">
            <MudNavLink Href="/crud" Match="NavLinkMatch.All" Icon="@Icons.Filled.Storage">
                Crud table
            </MudNavLink>
            <MudNavLink Href="/crud-private" Match="NavLinkMatch.All" Icon="@Icons.Filled.Storage">
                Crud table private RLS
            </MudNavLink>
            <MudNavLink Href="/uploadfile" Match="NavLinkMatch.All" Icon="@Icons.Filled.Storage">
                Upload File
            </MudNavLink>
        </MudNavMenu>


        @* ********************************** MENU ********************************** *@

    </MudDrawer>
    <MudMainContent Class="d-flex flex-column" Style="height:100vh !important">
        @Body
    </MudMainContent>
</MudLayout>
